function getC(e){const t=e+"=",n=document.cookie.split("; ");let a="";return n.forEach((e=>{0===e.indexOf(t)&&(a=e.substring(t.length))})),a}const randomMags=async e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e};async function renderData(e){if(0==e.count){document.getElementsByClassName("collection-list w-dyn-items w-row")[0].style.display="none";document.getElementsByClassName("no-results-wrapper")[0].style.display="block"}else{document.getElementsByClassName("collection-list w-dyn-items w-row")[0].style.display="block";document.getElementsByClassName("no-results-wrapper")[0].style.display="none";const m=document.getElementsByClassName("results-count")[0],p=document.createElement("div");p.className="results-count";const u=document.createElement("span");u.textContent=e.count+" Ergebnisse von ";const g=document.createElement("span");g.textContent=e.totalCount,p.append(u,g),m.replaceWith(p);let b=document.createDocumentFragment();const y=document.getElementsByClassName("w-dyn-list")[0];var t;document.getElementsByClassName("w-dyn-items w-row")[0]?(t=document.getElementsByClassName("w-dyn-items w-row")[0]).innerHTML="":(t=document.createElement("div")).className="w-dyn-items w-row";let w=0;for(q of e.magazines){let e=document.createElement("div");e.className="archive-col-item w-dyn-item w-col w-col-3";var n=document.createElement("a");n.href=new URL(document.baseURI).origin+"/magazine?productId="+q.SKU,n.className="produvt-img-wrapper w-inline-block";var a=document.createElement("img");a.className="product-img",a.src="https://res.cloudinary.com/wdy-bzs/image/upload/v1651695832/"+q.Images,a.loading=w<=10?"eager":"lazy",w++,a.alt="product-img";var o=document.createElement("div");o.className="product-title",q.Name.length>21?o.innerText=q.Name.slice(0,18)+"...":o.innerText=q.Name,o.setAttribute("fs-cmsfilter-field","Titel");var s=document.createElement("div");s.className="issue-wrapper";var l=document.createElement("div");l.className="month",l.innerText=q.Monat+" | ";var c=document.createElement("div");c.className="date-divider";var r=document.createElement("div");r.className="year",r.innerText=" "+q.Jahr+" Ausgabe "+q.Ausgabe;var d=document.createElement("div");d.className="decade",s.append(l,c,r,d),n.append(a,o,s),e.append(n),e.setAttribute("role","listitem"),b.append(e)}t.append(b),y.prepend(t),async function(){const t=document.getElementsByClassName("w-dyn-list")[0];var n;document.getElementsByClassName("w-pagination-wrapper pagination")[0]?((n=document.getElementsByClassName("w-pagination-wrapper pagination")[0]).innerHTML="",n.style.display="flex"):((n=document.createElement("div")).className="w-pagination-wrapper pagination",n.style.display="flex");const a=e.pageCount,o=e.currentPage||1;console.debug("Current page : "+o);const s=getC("lastQuery");console.debug("Last query inside pagination "+s);const l=document.createDocumentFragment();if(1!=o){if(o>10){const e=document.createElement("a");e.className="w-pagination-previous pagination-button-left keep-params 10xarrow",e.setAttribute("aria-label","Previous Page"),e.style.marginRight=0;const t=document.createElement("img");t.width="45",t.loading="lazy",t.src="https://res.cloudinary.com/wdy-bzs/image/upload/v1661106376/asset/Group_42_1.svg",t.className="pagination-arrow left",e.style.marginRight="0px",e.style.paddingRight="0px",e.append(t),l.append(e),e.href=""!=s?"?page="+(o-10)+"&"+s:"?page="+(o-10)}const e=document.createElement("a");e.className="w-pagination-previous pagination-button-left keep-params 10xarrow",e.setAttribute("aria-label","Previous Page");const t=document.createElement("img");t.width="45",t.loading="lazy",t.src="https://res.cloudinary.com/wdy-bzs/image/upload/v1651849092/asset/Arrow.svg",t.className="pagination-arrow left",e.style.paddingLeft="0px",e.style.paddingRight="0px",e.append(t),l.append(e),e.href=""!=s?"?page="+(o-1)+"&"+s:"?page="+(o-1)}if(a<=7){for(i=1;i<=a;i++){const e=document.createElement("a"),t=document.createElement("div");t.textContent=i,e.className="pagination-page-button w-inline-block",console.debug(typeof i),e.href=""!=s?"?page="+i+"&"+s:"?page="+i,console.debug(e.href),e.append(t),l.append(e),i==o&&(e.className="pagination-page-button w-inline-block w--current")}n.append(l)}else if(o<5){for(i=1;i<=5;i++){const e=document.createElement("a"),t=document.createElement("div");t.textContent=i,e.className="pagination-page-button w-inline-block",console.debug(typeof i),e.href=""!=s?"?page="+i+"&"+s:"?page="+i,console.debug(e.href),e.append(t),l.append(e),i==o&&(e.className="pagination-page-button w-inline-block w--current")}const e=document.createElement("div");e.textContent="...",e.className="pagination-dots-button",l.append(e);const t=document.createElement("a"),c=document.createElement("div");c.textContent=a,t.className="pagination-page-button w-inline-block",t.href=""!=s?"?page="+a+"&"+s:"?page="+a,t.append(c),l.append(t),n.append(l)}else if(o>=5&&o<=a-4){const e=document.createElement("a"),t=document.createElement("div");t.textContent="1",e.className="pagination-page-button w-inline-block",e.href=""!=s?"?page=1&"+s:"?page=1",e.append(t),l.append(e);const r=document.createElement("div");r.textContent="...",r.className="pagination-dots-button",l.append(r);var c=o-1;for(i=0;i<3;i++){const e=document.createElement("a"),t=document.createElement("div");console.debug("Paging : "+c),t.textContent=c,e.className="pagination-page-button w-inline-block",e.href=""!=s?"?page="+c+"&"+s:"?page="+c,e.append(t),l.append(e),c==o&&(e.className="pagination-page-button w-inline-block w--current"),c+=1}const d=document.createElement("div");d.textContent="...",d.className="pagination-dots-button",l.append(d);const m=document.createElement("a"),p=document.createElement("div");p.textContent=a,m.className="pagination-page-button w-inline-block",m.href=""!=s?"?page="+i+"&"+s:"?page="+i,m.append(p),l.append(m),n.append(l)}else{const e=document.createElement("a"),t=document.createElement("div");t.textContent="1",e.className="pagination-page-button w-inline-block",e.href=""!=s?"?page=1&"+s:"?page=1",e.append(t),l.append(e);const r=document.createElement("div");for(r.textContent="...",r.className="pagination-dots-button",l.append(r),i=a-4;i<=a;i++){const e=document.createElement("a"),t=document.createElement("div");t.textContent=i,e.className="pagination-page-button w-inline-block",e.href=""!=s?"?page="+i+"&"+s:"?page="+i,e.append(t),l.append(e),i==o&&(e.className="pagination-page-button w-inline-block w--current"),c++}n.append(l)}if(o!=a){console.debug(typeof o);const e=document.createElement("a");e.className="w-pagination-right pagination-button-next keep-params 10xarrow",e.setAttribute("aria-label","Next Page");const t=document.createElement("img");if(e.style.marginLeft=10,t.width="45",t.loading="lazy",t.src="https://res.cloudinary.com/wdy-bzs/image/upload/v1651849092/asset/Arrow.svg",t.className="pagination-arrow right",e.append(t),e.href=""!=s?"?page="+parseInt(Number(o)+1)+"&"+s:"?page="+parseInt(Number(o)+1),n.append(e),a-o>=10){const e=document.createElement("a");e.className="w-pagination-right pagination-button-next keep-params 10xarrow",e.setAttribute("aria-label","Next Page");const t=document.createElement("img");t.style,t.width="45",e.style.marginLeft="0px",t.loading="lazy",t.src="https://res.cloudinary.com/wdy-bzs/image/upload/v1661106376/asset/Group_42_1.svg",t.className="pagination-arrow right",e.append(t),e.href=""!=s?"?page="+parseInt(Number(o)+10)+"&"+s:"?page="+parseInt(Number(o)+10),n.append(e)}}t.append(n)}();""==getC("lastQuery")&&fetch("https://bildzeitschrift.netlify.app/.netlify/functions/randomize").then((e=>{e.json(),console.log("Randomized")}))}}async function loadFData(){setTimeout((async()=>{console.debug("button clicked");const e=document.getElementsByClassName("reset-btn w-inline-block");for(x of e)x.addEventListener("mouseup",loadFData);const t=document.getElementsByClassName("dropdown-btn-wrapper");for(s of t)s.addEventListener("mouseup",loadFData);const n=document.getElementsByClassName("checkbox-element-wrapper"),a=document.getElementsByClassName("filter-dropdown single"),o=document.getElementsByClassName("reset-all-btn")[0];for(q of(o.href=new URL(document.baseURI).origin+"/archiv",o.addEventListener("mouseup",loadFData),n))q.addEventListener("mouseup",loadFData);for(s of a)s.addEventListener("mouseup",loadFData);var l=window.location.href,c=l.split("?")[1];console.debug(l);var r="";if(c)if(l.split("?")[1].includes("page")){c.split("&").length>1&&console.debug(c.split("&"));var d=c.split("&");for(console.debug(d),i=1;i<d.length;i++)r+=d[i]}else r+=c;document.cookie="lastQuery="+r,console.debug("Query cookie"+r),console.debug("Get query :"+c),l.split("?").length>1?(console.debug("Inside if block"),fetch("https://bildzeitschrift.netlify.app/.netlify/functions/loadData?randomNumber="+getC("randomNumber")+"&randomOrder="+getC("randomOrder")+"&"+c).then((e=>e.json())).then((e=>{if(console.debug("Data count "+e.count),0==e.count){console.debug("Data count "+e.count);document.getElementsByClassName("collection-list w-dyn-items w-row")[0].style.display="none";const t=document.getElementsByClassName("results-count")[0];t.innerHTML="";const n=document.createElement("span");n.textContent=e.count+" Ergebnisse von ";const a=document.createElement("span");a.textContent=e.totalCount,t.append(n,a);document.getElementsByClassName("no-results-wrapper")[0].style.display="block";document.getElementsByClassName("w-pagination-wrapper pagination")[0].style.display="none"}else if(renderData(e),console.debug("data count : "+e.count),e.currentPage>e.pageCount){document.getElementsByClassName("pagination-page-button w-inline-block")[0].click()}}))):fetch("https://bildzeitschrift.netlify.app/.netlify/functions/loadData?page=1&randomNumber="+getC("randomNumber")+"&randomOrder="+getC("randomOrder")).then((e=>e.json())).then((e=>{if(console.debug("Data count "+e.count),0==e.count){console.debug("Data count "+e.count);document.getElementsByClassName("collection-list w-dyn-items w-row")[0].style.display="none";document.getElementsByClassName("no-results-wrapper")[0].style.display="block"}else renderData(e)}))}),100)}document.addEventListener("DOMContentLoaded",(async function(){const e=(new Date).getTime(),t=new Date(e+6e5);var n=Math.floor(5*Math.random()),a=0==Math.floor(2*Math.random())?-1:1;""==getC("randomOrder")&&""==getC("randomNumber")&&(document.cookie="randomOrder="+a+";path=/;expires="+t.toUTCString(),document.cookie="randomNumber="+n+";path=/;expires="+t.toUTCString());const o=document.getElementsByClassName("dropdown-btn-wrapper");for(s of o)s.addEventListener("mouseup",loadFData);const i=document.getElementsByClassName("checkbox-element-wrapper"),l=document.getElementsByClassName("reset-all-btn")[0];for(q of(l.addEventListener("mouseup",loadFData),l.href="#",i))q.addEventListener("mouseup",loadFData);document.getElementsByClassName("search-field w-input")[0].addEventListener("input",loadFData),loadFData(),setTimeout((()=>{}),1e3)}));
