document.addEventListener("DOMContentLoaded",async()=>{window.printPDF=e=>{fetch("https://bildzeitschrift.netlify.app/.netlify/functions/orders?id="+e.target.attributes.token.value,{method:"GET",headers:{Authorization:sessionStorage.getItem("auth")}}).then(e=>e.json()).then(e=>{var d=window.open("","");d.document.write(e.HTML),"portrait-primary"!=screen.orientation.type&&90!=screen.orientation.angle?(d.document.close(),d.focus(),d.print(),d.close()):d.open()})};var e=document.querySelector(".head-wrap"),d=await fetch("https://bildzeitschrift.netlify.app/.netlify/functions/orders",{method:"GET",headers:{Authorization:sessionStorage.getItem("auth")}});if(200==d.status){var i=await d.json();if(0<i.length&&"portrait-primary"!=screen.orientation.type&&90!=screen.orientation.angle){let d=`  <div class="w-layout-grid orders-grid" style="display:grid;">
                            <div id="w-node-_971481b0-2c9d-a946-d6eb-5dd17fdaac3e-fca4f9b2" class="orders-grid-div"><div class="orders-grid-txt">Bestelldatum</div></div>
                            <div id="w-node-_618b6310-8d83-799a-e6c0-c6ac7aaff393-fca4f9b2" class="orders-grid-div is-details"><div class="orders-grid-txt">Rechnungsdetails</div></div>
                            <div id="w-node-_93c9560f-7003-8a75-1c85-607c97118f41-fca4f9b2" class="orders-grid-div"><div class="orders-grid-txt">Summe</div></div>
                            <div id="w-node-b037d4e7-0163-9364-fac1-082f04300f00-fca4f9b2" class="orders-grid-div is-last"><div class="orders-grid-txt">Rechnung</div></div>`;for(let e=0;e<i.length;e++){var t=new Date(i[e].date);d=(d=(d=(d+=`<div id="w-node-_3cc087e9-0c02-0309-866d-d4426da106df-fca4f9b2" class="orders-grid-div ${e==i.length-1?"is-bottom":""}"><div class="orders-grid-txt">${t.getDate().toString().padStart(2,"0")} ${t.toLocaleString("de-DE",{month:"long"})} ${t.getFullYear()}</div></div>`)+`<div id="w-node-e2dc63ca-cfb7-5742-9a08-db5b4d56f4c3-fca4f9b2" class="orders-grid-div ${e==i.length-1?"is-bottom":""}"><div class="orders-grid-txt">${i[e].invoice_details}</div></div>`)+`<div id="w-node-_124d6d36-72fc-24b0-c5f3-94fb8f36a298-fca4f9b2" class="orders-grid-div ${e==i.length-1?"is-bottom":""}"><div class="orders-grid-txt">â‚¬ ${i[e].total}</div></div>`)+`<div id="w-node-_160f0ee6-77f7-6901-1803-eb60995699de-fca4f9b2" class="orders-grid-div is-last ${e==i.length-1?"is-bottom":""}"><a href="${i[e].hasOwnProperty("invoice_url")?i[e].invoice_url:"#"}" token=${i[e].order_id} class="orders-grid-txt is-link" ${i[e].invoice_url?null:"onclick='printPDF(event)'"}>Rechnung herunterladen</a></div>`}d+="</div>",document.querySelector(".loading").style.display="none",e.insertAdjacentHTML("afterend",d)}else if(0<i.length&&("portrait-primary"==screen.orientation.type||90==screen.orientation.angle)){let d=`  <div class="w-layout-grid orders-grid" style="display:grid;">
            <div id="w-node-_971481b0-2c9d-a946-d6eb-5dd17fdaac3e-fca4f9b2" class="orders-grid-div"><div class="orders-grid-txt">Bestelldatum</div></div>
            <div id="w-node-b037d4e7-0163-9364-fac1-082f04300f00-fca4f9b2" class="orders-grid-div is-last"><div class="orders-grid-txt">Rechnung</div></div>`;for(let e=0;e<i.length;e++){var r=new Date(i[e].date);d=(d+=`<div id="w-node-_3cc087e9-0c02-0309-866d-d4426da106df-fca4f9b2" class="orders-grid-div ${e==i.length-1?"is-bottom":""}"><div class="orders-grid-txt">${r.getDate().toString().padStart(2,"0")} ${r.toLocaleString("de-DE",{month:"long"})} ${r.getFullYear()}</div></div>`)+`<div id="w-node-_160f0ee6-77f7-6901-1803-eb60995699de-fca4f9b2" class="orders-grid-div is-last ${e==i.length-1?"is-bottom":""}"><a href="${i[e].hasOwnProperty("invoice_url")?i[e].invoice_url:"#"}" token=${i[e].order_id} class="orders-grid-txt is-link" ${i[e].invoice_url?null:"onclick='printPDF(event)'"}>Rechnung herunterladen</a></div>`}d+="</div>",document.querySelector(".loading").style.display="none",e.insertAdjacentHTML("afterend",d)}else document.querySelector(".loading-data-img").style.display="none",document.querySelector(".product-title").innerText="keine Bestellungen vorhanden"}});