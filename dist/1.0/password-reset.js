document.addEventListener("DOMContentLoaded",function(e){let s=new URLSearchParams(window.location.search);null==s.get("fp_token")&&(setTimeout(()=>{this.location.replace("/passwort-anfordern")},1500),Swal.fire({position:"center",icon:"error",title:"Invalid token",showConfirmButton:!1,timer:1500})),document.getElementById("pass-form").addEventListener("submit",async function(e){var t=document.getElementById("pass-btn"),e=(t.value="Einen Moment bitte...",t.style.backgroundColor="#82736b",e.preventDefault(),e.stopPropagation(),document.getElementById("Passwort").value),o=document.getElementById("Passwort-wiederholen").value;if(e!=o)Swal.fire({position:"center",icon:"error",title:"Passwort und Bestätigungspasswort stimmen nicht überein",showConfirmButton:!1,timer:1500}),document.getElementById("Passwort").focus();else try{var n=await fetch("https://bildzeitschrift.netlify.app/.netlify/functions/forgot-password",{method:"POST",body:JSON.stringify({fp_token:s.get("fp_token"),new_password:e})});200==n.status?(setTimeout(()=>{location.replace("/login")},2e3),Swal.fire({position:"center",icon:"success",title:"Passwort wurde erfolgreich zurückgesetzt",showConfirmButton:!1,timer:2e3})):400==n.status&&Swal.fire({position:"center",icon:"error",title:"Link expired",showConfirmButton:!1,timer:null})}catch(e){console.log(e.message)}t.value="Neues Passwort speichern",t.style.backgroundColor="#bf8563"},!0)});